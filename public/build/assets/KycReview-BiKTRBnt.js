import{r as f,c as d,a as h,b as C,h as T,w as $,d as e,l as V,e as k,o as i,t as a,f as _,n as u,F as w,j,p as F,T as E,m as z,g as I,v as N,q as G,s as L,x as B}from"./app-CGeM4hcv.js";import{_ as O}from"./AuthenticatedLayout-DuDTvB04.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DgnepM2X.js";const Y={class:"ky-root"},q={class:"ky-header"},U={class:"max-w-7xl mx-auto px-6 py-6 flex justify-between items-center"},H={key:0,class:"max-w-7xl mx-auto px-6 mt-4"},J={class:"bg-emerald-50 border border-emerald-200 rounded-xl px-4 py-3 text-emerald-700 text-sm"},Q={class:"max-w-7xl mx-auto px-6 py-6 space-y-6"},W={class:"grid grid-cols-3 gap-4"},X={class:"text-3xl font-black text-amber-600"},Z={class:"text-3xl font-black text-emerald-600"},ee={class:"text-3xl font-black text-red-600"},te={class:"ky-card overflow-hidden"},se={class:"overflow-x-auto"},le={class:"ky-table"},ae={class:"flex items-center gap-3"},ne={class:"ky-avatar"},oe={class:"text-sm font-semibold text-[#1A2B4A]"},ie={class:"text-xs text-[#8896AB]"},re={class:"text-sm text-[#5A6B82]"},de=["href"],ue={class:"flex items-center gap-2"},ce={class:"text-xs text-[#8896AB]"},xe=["onClick"],me={class:"text-center"},ve={class:"text-[#8896AB] text-xs"},be={class:"text-center"},pe={key:0,class:"flex justify-center gap-1"},fe=["onClick"],_e=["onClick"],ye={key:1,class:"text-xs text-red-500 max-w-[150px] truncate"},ge={key:2,class:"text-xs text-[#8896AB]"},he={key:0},ke={class:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl border border-[#E8ECF1]",style:{direction:"rtl"}},we={class:"text-[#8896AB] text-sm mb-4"},Be={class:"flex gap-3 mt-4"},Ae=["disabled"],Ce={class:"bg-white rounded-2xl w-full max-w-lg p-6 shadow-2xl border border-[#E8ECF1]",style:{direction:"rtl"}},$e={class:"text-[#8896AB] text-sm mb-4"},je={class:"text-center mb-4"},Fe={class:"space-y-2"},Ee={key:0,class:"text-emerald-500"},ze={key:1,class:"text-amber-500"},De={key:2,class:"text-red-500"},Ke={key:3,class:"text-blue-500"},Me={class:"text-sm font-semibold text-[#1A2B4A]"},Se={class:"text-xs text-[#8896AB]"},Re={__name:"KycReview",props:{documents:Object,filters:Object,stats:Object},setup(m){const D=m,A=G(()=>L().props.flash||{}),p=f(D.filters?.status||"pending"),y=l=>{p.value=l,B.get(route("admin.kyc"),{status:l},{preserveState:!0})},c=f(null),v=f(""),n=f(null),K=l=>B.post(route("admin.kyc.review",l.id),{action:"approve"}),M=l=>{v.value.trim()&&(B.post(route("admin.kyc.review",l.id),{action:"reject",rejection_reason:v.value}),c.value=null,v.value="")},g={id_front:"Ù‡ÙˆÙŠØ© - Ø£Ù…Ø§Ù…",id_back:"Ù‡ÙˆÙŠØ© - Ø®Ù„Ù",selfie:"ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©",proof_of_address:"Ø¥Ø«Ø¨Ø§Øª Ø¹Ù†ÙˆØ§Ù†",passport:"Ø¬ÙˆØ§Ø² Ø³ÙØ±"},S={pending:"ky-badge-yellow",approved:"ky-badge-green",rejected:"ky-badge-red"},o=l=>{const t=[];if(l.mime_type&&l.mime_type.includes("image")&&t.push({label:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù",status:"pass",detail:l.mime_type}),l.file_size){const r=l.file_size/1024;r<50?t.push({label:"Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù",status:"warning",detail:`${r.toFixed(0)}KB â€” ØµØºÙŠØ± Ø¬Ø¯Ø§Ù‹ (Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª)`}):r>200?t.push({label:"Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù",status:"pass",detail:`${r.toFixed(0)}KB â€” Ø­Ø¬Ù… Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù…Ø³ØªÙ†Ø¯ Ø£ØµÙ„ÙŠ`}):t.push({label:"Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù",status:"info",detail:`${r.toFixed(0)}KB`})}if(l.image_width&&l.image_height){const r=l.image_width/l.image_height,b=r>.5&&r<.7||r>1.7&&r<2;t.push({label:"Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ØµÙˆØ±Ø©",status:b?"warning":"pass",detail:`${l.image_width}Ã—${l.image_height} ${b?"(Ø£Ø¨Ø¹Ø§Ø¯ Ù…Ø´Ø§Ø¨Ù‡Ø© Ù„Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª)":"(Ø£Ø¨Ø¹Ø§Ø¯ Ø·Ø¨ÙŠØ¹ÙŠØ©)"}`})}if(l.original_filename){const r=/screenshot|screen|IMG_\d{4}/i.test(l.original_filename),b=/^(IMG|DSC|DCIM|photo|P_)\d/i.test(l.original_filename);t.push({label:"Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù",status:r?"fail":b?"pass":"info",detail:`"${l.original_filename}" ${r?"âš ï¸ ÙŠØ¨Ø¯Ùˆ Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª!":b?"âœ… ØµÙˆØ±Ø© ÙƒØ§Ù…ÙŠØ±Ø§":""}`})}const s=t.filter(r=>r.status==="fail").length,x=t.filter(r=>r.status==="warning").length,R=Math.max(0,100-s*40-x*15);return{checks:t,score:R,verdict:s>0?"Ù…Ø´Ø¨ÙˆÙ‡":x>1?"ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©":"ÙŠØ¨Ø¯Ùˆ Ø£ØµÙ„ÙŠ"}};return(l,t)=>(i(),d(w,null,[h(C(T),{title:"KYC Review - Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù‡ÙˆÙŠØ©"}),h(O,null,{default:$(()=>[e("div",Y,[e("div",q,[e("div",U,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-2xl font-bold text-[#1A2B4A]"},"Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù‡ÙˆÙŠØ© â€” KYC"),e("p",{class:"text-sm text-[#8896AB] mt-1"},"ÙØ­Øµ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ØµØ§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª")],-1)),h(C(V),{href:l.route("admin.dashboard"),class:"ky-back"},{default:$(()=>[...t[9]||(t[9]=[k("â† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",-1)])]),_:1},8,["href"])])]),A.value.success?(i(),d("div",H,[e("div",J,"âœ“ "+a(A.value.success),1)])):_("",!0),e("div",Q,[e("div",W,[e("button",{onClick:t[0]||(t[0]=s=>y("pending")),class:u(["ky-stat",p.value==="pending"?"ky-stat-yellow-active":""])},[e("div",X,a(m.stats.pending),1),t[11]||(t[11]=e("div",{class:"text-sm text-[#8896AB] mt-1"},"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",-1))],2),e("button",{onClick:t[1]||(t[1]=s=>y("approved")),class:u(["ky-stat",p.value==="approved"?"ky-stat-green-active":""])},[e("div",Z,a(m.stats.approved),1),t[12]||(t[12]=e("div",{class:"text-sm text-[#8896AB] mt-1"},"âœ… Ù…Ø¹ØªÙ…Ø¯",-1))],2),e("button",{onClick:t[2]||(t[2]=s=>y("rejected")),class:u(["ky-stat",p.value==="rejected"?"ky-stat-red-active":""])},[e("div",ee,a(m.stats.rejected),1),t[13]||(t[13]=e("div",{class:"text-sm text-[#8896AB] mt-1"},"âŒ Ù…Ø±ÙÙˆØ¶",-1))],2)]),e("div",te,[e("div",se,[e("table",le,[t[15]||(t[15]=e("thead",null,[e("tr",null,[e("th",null,"Ø§Ù„Ø¹Ù…ÙŠÙ„"),e("th",null,"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯"),e("th",null,"Ø§Ù„Ù…Ù„Ù"),e("th",null,"ÙØ­Øµ Ø§Ù„Ø£ØµØ§Ù„Ø©"),e("th",{class:"text-center"},"Ø§Ù„Ø­Ø§Ù„Ø©"),e("th",null,"Ø§Ù„ØªØ§Ø±ÙŠØ®"),e("th",{class:"text-center"},"Ø¥Ø¬Ø±Ø§Ø¡")])],-1)),e("tbody",null,[(i(!0),d(w,null,j(m.documents.data,s=>(i(),d("tr",{key:s.id},[e("td",null,[e("div",ae,[e("div",ne,a(s.user?.full_name?.charAt(0)),1),e("div",null,[e("div",oe,a(s.user?.full_name),1),e("div",ie,a(s.user?.email),1)])])]),e("td",re,a(g[s.document_type]||s.document_type),1),e("td",null,[e("a",{href:l.route("admin.kyc.view",s.id),target:"_blank",class:"ky-file-link"},"ğŸ“„ "+a(s.original_filename),9,de)]),e("td",null,[e("div",ue,[e("div",{class:u(["ky-auth-score",{"ky-auth-pass":o(s).score>=70,"ky-auth-warn":o(s).score>=40&&o(s).score<70,"ky-auth-fail":o(s).score<40}])},a(o(s).score)+"% ",3),e("span",ce,a(o(s).verdict),1),e("button",{onClick:x=>n.value=s,class:"text-xs text-[#1E5EFF] hover:underline"},"ØªÙØ§ØµÙŠÙ„",8,xe)])]),e("td",me,[e("span",{class:u([S[s.status],"ky-badge"])},a(s.status),3)]),e("td",ve,a(new Date(s.created_at).toLocaleString("en-GB")),1),e("td",be,[s.status==="pending"?(i(),d("div",pe,[e("button",{onClick:x=>K(s),class:"ky-btn-green"},"âœ“ Ø§Ø¹ØªÙ…Ø§Ø¯",8,fe),e("button",{onClick:x=>c.value=s,class:"ky-btn-red"},"âœ— Ø±ÙØ¶",8,_e)])):s.status==="rejected"?(i(),d("div",ye,a(s.rejection_reason),1)):(i(),d("div",ge,a(s.reviewer?.full_name),1))])]))),128)),m.documents.data?.length?_("",!0):(i(),d("tr",he,[...t[14]||(t[14]=[e("td",{colspan:"7",class:"py-12 text-center text-[#8896AB]"},"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³ØªÙ†Ø¯Ø§Øª",-1)])]))])])])])]),(i(),F(E,{to:"body"},[c.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:t[6]||(t[6]=z(s=>c.value=null,["self"]))},[e("div",ke,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold text-[#1A2B4A] mb-1"},"Ø±ÙØ¶ Ù…Ø³ØªÙ†Ø¯",-1)),e("p",we,a(c.value.user?.full_name)+" â€” "+a(g[c.value.document_type]),1),I(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),placeholder:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶...",rows:"3",class:"w-full border border-[#E8ECF1] rounded-xl px-4 py-3 text-[#1A2B4A] outline-none focus:border-red-400 text-sm resize-none"},null,512),[[N,v.value]]),e("div",Be,[e("button",{onClick:t[4]||(t[4]=s=>M(c.value)),disabled:!v.value.trim(),class:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold text-sm disabled:opacity-50"},"âœ— Ø±ÙØ¶",8,Ae),e("button",{onClick:t[5]||(t[5]=s=>c.value=null),class:"flex-1 py-3 bg-[#F0F2F5] text-[#5A6B82] rounded-xl text-sm"},"Ø¥Ù„ØºØ§Ø¡")])])])):_("",!0)])),(i(),F(E,{to:"body"},[n.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:t[8]||(t[8]=z(s=>n.value=null,["self"]))},[e("div",Ce,[t[17]||(t[17]=e("h3",{class:"text-lg font-bold text-[#1A2B4A] mb-1"},"ğŸ” ØªÙ‚Ø±ÙŠØ± ÙØ­Øµ Ø£ØµØ§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯",-1)),e("p",$e,a(n.value.user?.full_name)+" â€” "+a(g[n.value.document_type]),1),e("div",je,[e("div",{class:u(["inline-flex items-center gap-3 px-6 py-3 rounded-2xl",{"bg-emerald-50 border-emerald-200":o(n.value).score>=70,"bg-amber-50 border-amber-200":o(n.value).score>=40&&o(n.value).score<70,"bg-red-50 border-red-200":o(n.value).score<40}]),style:{"border-width":"1px"}},[e("span",{class:u(["text-3xl font-black",{"text-emerald-600":o(n.value).score>=70,"text-amber-600":o(n.value).score>=40&&o(n.value).score<70,"text-red-600":o(n.value).score<40}])},a(o(n.value).score)+"%",3),e("span",{class:u(["text-sm font-semibold",{"text-emerald-700":o(n.value).score>=70,"text-amber-700":o(n.value).score>=40&&o(n.value).score<70,"text-red-700":o(n.value).score<40}])},a(o(n.value).verdict),3)],2)]),e("div",Fe,[(i(!0),d(w,null,j(o(n.value).checks,(s,x)=>(i(),d("div",{key:x,class:u(["flex items-center gap-3 p-3 rounded-xl",{"bg-emerald-50":s.status==="pass","bg-amber-50":s.status==="warning","bg-red-50":s.status==="fail","bg-gray-50":s.status==="info"}])},[s.status==="pass"?(i(),d("span",Ee,"âœ…")):s.status==="warning"?(i(),d("span",ze,"âš ï¸")):s.status==="fail"?(i(),d("span",De,"âŒ")):(i(),d("span",Ke,"â„¹ï¸")),e("div",null,[e("div",Me,a(s.label),1),e("div",Se,a(s.detail),1)])],2))),128))]),t[18]||(t[18]=e("div",{class:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-xl text-xs text-blue-700"},[k(" ğŸ’¡ "),e("strong",null,"Ù…Ù„Ø§Ø­Ø¸Ø©:"),k(" ÙŠØªÙ… ÙØ­Øµ Ø§Ù„Ù…Ù„Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙˆØ£Ø¨Ø¹Ø§Ø¯Ù‡Ø§ ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ù„Ù. Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ø¹Ø§Ø¯Ø© ØªÙƒÙˆÙ† Ø¨Ø­Ø¬Ù… ØµØºÙŠØ± ÙˆØ£Ø¨Ø¹Ø§Ø¯ Ø´Ø§Ø´Ø© Ø§Ù„Ù‡Ø§ØªÙ. ")],-1)),e("button",{onClick:t[7]||(t[7]=s=>n.value=null),class:"w-full mt-4 py-3 bg-[#F0F2F5] text-[#5A6B82] rounded-xl text-sm"},"Ø¥ØºÙ„Ø§Ù‚")])])):_("",!0)]))])]),_:1})],64))}},Ge=P(Re,[["__scopeId","data-v-648a815d"]]);export{Ge as default};
